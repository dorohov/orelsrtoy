"use strict";!function(){$(function(){$(".azbn__property-gallery").each(function(e){var t=$(this),a=t.find(".azbn__property-gallery__move-me"),n=t.find(".azbn__property-gallery__item_full"),i=a.find(".azbn__property-gallery__item_sm"),r=t.find(".azbn__property-gallery__next"),o=t.find(".azbn__property-gallery__prev");i.length&&(i.each(function(e){var t=$(this),a=t.position().top;t.attr("data-position-top",a).attr("data-item-index",e+1)}),i.on("click.azbn",function(e){e.preventDefault();var t=$(this),r=t.attr("data-photo-id")||0,o=n.filter('[data-photo-id="'+r+'"]').eq(0);if(!screenJS.isXS()){var s=parseInt(t.attr("data-position-top")),p=(parseInt(t.attr("data-item-index")),a.outerHeight(!0)),_=a.parent().outerHeight(!0),l=t.outerHeight(!0);p-s+l>_&&a.attr("data-translate-y",s).css({transform:"translateY(-"+s+"px)"})}i.filter(".is--active").removeClass("is--active"),t.addClass("is--active"),n.filter(".is--active").removeClass("is--active"),o.addClass("is--active")}),r.on("click.azbn",function(e){e.preventDefault();var t=($(this),i.filter(".is--active").next());t.length?t.trigger("click.azbn"):i.eq(0).trigger("click.azbn")}),o.on("click.azbn",function(e){e.preventDefault();var t=($(this),i.filter(".is--active").prev());t.length?t.trigger("click.azbn"):i.eq(-1).trigger("click.azbn")}))}),$(".azbn__api__property-selection__form").each(function(e){var t=$(this),a=$(".azbn__api__property-selection__proxy");a.on("azbn.copy",function(){t.find("input, select").each(function(e){var t=$(this),n=t.attr("name"),i=t.val();a.find('input[name="'+n+'"]').val(i)})}),a.on("submit.azbn",function(e){e.preventDefault();var t=a.clone(!0),n=t.serialize();$.post("/api/",n,function(e){if(t.empty().remove(),e=JSON.parse(e),e.response&&e.response.buildings){$(".azbn__api__property-selection__result .azbn__api__property-selection__result__item").hide();for(var a in e.response.buildings)!function(e,t){$('.azbn__api__property-selection__result .azbn__api__property-selection__result__item[data-property-id="'+e+'"]').fadeIn("fast")}(a,e.response.buildings[a])}else $(".azbn__api__property-selection__result .azbn__api__property-selection__result__item").fadeIn("fast")})}),t.find("input").on("change.azbn keyup.azbn blur.azbn",function(e){var t=$(this),n=t.attr("name"),i=t.val();a.find('input[name="'+n+'"]').val(i),a.trigger("submit.azbn")}),t.find("select").on("change.azbn blur.azbn",function(){var e=$(this),t=e.attr("name"),n=e.find("option:selected").eq(0),i=n.attr("value");a.find('input[name="'+t+'"]').val(i),a.trigger("submit.azbn")}),a.trigger("azbn.copy")}),$(document.body).on("submit",".azbn-api-formsave",{},function(e){e.preventDefault();var t=$(this),a=t.clone(!0),n=t.attr("data-method")||"formsave";a.append($("<input/>",{type:"hidden",name:"method",value:n})),$.post("/api/",a.serialize(),function(e){e=JSON.parse(e),a.empty().remove(),t.trigger("reset"),t.closest(".modal").modal("hide")})})})}();