"use strict";!function(){$(function(){$(".azbn__property-gallery").each(function(e){var t=$(this),a=t.find(".azbn__property-gallery__move-me"),i=t.find(".azbn__property-gallery__item_full"),n=a.find(".azbn__property-gallery__item_sm"),r=t.find(".azbn__property-gallery__next"),o=t.find(".azbn__property-gallery__prev");n.length&&(n.each(function(e){var t=$(this),a=t.position().top;t.attr("data-position-top",a).attr("data-item-index",e+1)}),n.on("click.azbn",function(e){e.preventDefault();var t=$(this),r=t.attr("data-photo-id")||0,o=i.filter('[data-photo-id="'+r+'"]').eq(0);if(!screenJS.isXS()){var s=parseInt(t.attr("data-position-top")),l=(parseInt(t.attr("data-item-index")),a.outerHeight(!0)),p=a.parent().outerHeight(!0),_=t.outerHeight(!0);l-s+_>p&&a.attr("data-translate-y",s).css({transform:"translateY(-"+s+"px)"})}n.filter(".is--active").removeClass("is--active"),t.addClass("is--active"),i.filter(".is--active").removeClass("is--active"),o.addClass("is--active")}),r.on("click.azbn",function(e){e.preventDefault();var t=($(this),n.filter(".is--active").next());t.length?t.trigger("click.azbn"):n.eq(0).trigger("click.azbn")}),o.on("click.azbn",function(e){e.preventDefault();var t=($(this),n.filter(".is--active").prev());t.length?t.trigger("click.azbn"):n.eq(-1).trigger("click.azbn")}))}),$(".azbn__api__property-selection__form").each(function(e){var t=$(this);t.find("input, select").on("keyup.azbn blur.azbn",function(e){t.trigger("submit.azbn")}),t.find("select").on("change.azbn",function(){var e=$(this),t=e.find("option:selected").eq(0);e.val(t.attr("value")),e.trigger("blur.azbn"),alert(t.attr("value"))}),t.on("submit.azbn",function(e){e.preventDefault();var a=t.clone(!0),i=$("<input/>",{type:"hidden",name:"method",value:"iblocks/property/selection"});i.appendTo(a);var n=a.serialize();$.post("/api/",n,function(e){if(a.empty().remove(),e=JSON.parse(e),e.response&&e.response.buildings){$(".azbn__api__property-selection__result .azbn__api__property-selection__result__item").hide();for(var t in e.response.buildings)!function(e,t){$('.azbn__api__property-selection__result .azbn__api__property-selection__result__item[data-building-id="'+e+'"]').fadeIn("fast")}(t,e.response.buildings[t])}else $(".azbn__api__property-selection__result .azbn__api__property-selection__result__item").fadeIn("fast")})})}),$(document.body).on("submit",".azbn-api-formsave",{},function(e){e.preventDefault();var t=$(this),a=t.clone(!0),i=t.attr("data-method")||"formsave";a.append($("<input/>",{type:"hidden",name:"method",value:i})),$.post("/api/",a.serialize(),function(e){e=JSON.parse(e),a.empty().remove(),t.trigger("reset"),t.closest(".modal").modal("hide")})})})}();