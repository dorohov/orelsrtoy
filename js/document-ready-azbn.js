"use strict";!function(){$(function(){$(".azbn__property-gallery").each(function(t){var e=$(this),n=e.find(".azbn__property-gallery__move-me"),a=e.find(".azbn__property-gallery__item_full"),i=n.find(".azbn__property-gallery__item_sm"),_=e.find(".azbn__property-gallery__next"),r=e.find(".azbn__property-gallery__prev");i.length&&(i.each(function(t){var e=$(this),n=e.position().top;e.attr("data-position-top",n).attr("data-item-index",t+1)}),i.on("click.azbn",function(t){t.preventDefault();var e=$(this),_=e.attr("data-photo-id")||0,r=a.filter('[data-photo-id="'+_+'"]').eq(0);if(!screenJS.isXS()){var o=parseInt(e.attr("data-position-top")),s=(parseInt(e.attr("data-item-index")),n.outerHeight(!0)),p=n.parent().outerHeight(!0),l=e.outerHeight(!0);s-o+l>p&&n.attr("data-translate-y",o).css({transform:"translateY(-"+o+"px)"})}i.filter(".is--active").removeClass("is--active"),e.addClass("is--active"),a.filter(".is--active").removeClass("is--active"),r.addClass("is--active")}),_.on("click.azbn",function(t){t.preventDefault();var e=($(this),i.filter(".is--active").next());e.length?e.trigger("click.azbn"):i.eq(0).trigger("click.azbn")}),r.on("click.azbn",function(t){t.preventDefault();var e=($(this),i.filter(".is--active").prev());e.length?e.trigger("click.azbn"):i.eq(-1).trigger("click.azbn")}))}),$(".azbn__api__property-selection__form").each(function(t){var e=$(this),n=$(".azbn__api__property-selection__proxy");n.on("azbn.copy",function(){e.find("input, select").each(function(t){var e=$(this),a=e.attr("name"),i=e.val();n.find('input[name="'+a+'"]').val(i)})}),n.on("submit.azbn",function(t){t.preventDefault();var e=n.clone(!0),a=e.serialize();$.post("/api/",a,function(t){if(e.empty().remove(),t=JSON.parse(t),t.response&&t.response.buildings){$(".azbn__api__property-selection__result .azbn__api__property-selection__result__item").hide();for(var n in t.response.buildings)!function(t,e){$('.azbn__api__property-selection__result .azbn__api__property-selection__result__item[data-property-id="'+t+'"]').fadeIn("fast")}(n,t.response.buildings[n])}else $(".azbn__api__property-selection__result .azbn__api__property-selection__result__item").fadeIn("fast")})}),e.find("input").on("change.azbn keyup.azbn blur.azbn",function(t){var e=$(this),a=e.attr("name"),i=e.val();n.find('input[name="'+a+'"]').val(i),n.trigger("submit.azbn")}),e.find("select").on("change.azbn blur.azbn",function(){var t=$(this),e=t.attr("name"),a=t.find("option:selected").eq(0),i=a.attr("value");n.find('input[name="'+e+'"]').val(i),n.trigger("submit.azbn")}),n.trigger("azbn.copy")}),$(document.body).on("click",".azbn__news-list__btn",{},function(t){var e=$(this);$(".azbn__news-list .azbn__news-list__item").fadeIn("fast"),e.empty().remove()}),function(){$(".azbn__news-list .azbn__news-list__item").each(function(t){t>2&&$(this).hide()})}(),$(document.body).on("click",".azbn__building-list__btn",{},function(t){var e=$(this);$(".azbn__building-list .azbn__building-list__item").fadeIn("fast"),e.empty().remove()}),function(){$(".azbn__building-list .azbn__building-list__item").each(function(t){t>2&&$(this).hide()})}(),$(".azbn__apartment__section .azbn__apartment__popover").hide(),$(".azbn__apartment__section .azbn__apartment__link.is--free").on({mouseover:function(t){t.preventDefault();var e=$(this),n=JSON.parse(e.attr("data-popup-info"));console.log(n);var a=e.closest(".azbn__apartment__section").find(".azbn__apartment__popover");a.find(".azbn__apartment__popover__title").html(n.title),a.find(".azbn__apartment__popover__img").html(n.img),a.find(".azbn__apartment__popover__area_total").html(n.area_total),a.find(".azbn__apartment__popover__price_value").html(n.price_value),a.css({left:e.position().left+e.outerWidth(!0)+42+"px",top:e.parent().position().top+e.outerHeight(!0)/2-a.outerHeight(!0)/2+"px"}).fadeIn("fast")},mouseout:function(t){t.preventDefault();var e=$(this),n=e.closest(".azbn__apartment__section").find(".azbn__apartment__popover");n.hide()}}),$(document.body).on("submit",".azbn-api-formsave",{},function(t){t.preventDefault();var e=$(this),n=e.clone(!0),a=e.attr("data-method")||"formsave";n.append($("<input/>",{type:"hidden",name:"method",value:a})),$.post("/api/",n.serialize(),function(t){t=JSON.parse(t),n.empty().remove(),e.trigger("reset"),e.closest(".modal").modal("hide"),$("#modal-message-formsave-result").modal()})})})}();